# プロダクト要求定義書

## 変更履歴
- 2026-02-25: 初版作成

---

## 1. プロダクトビジョンと目的

### ビジョン
桃太郎電鉄にインスパイアされた、日本全国を舞台にした双六ボードゲームをWebブラウザで楽しめるようにする。

### 目的
- 桃鉄のゲームルールをWebブラウザ上で忠実に再現する
- 同じPCで複数人がワイワイ楽しめるホットシート対戦を実現する
- CPU対戦により1人でも遊べる環境を提供する

---

## 2. ターゲットユーザー

### プライマリユーザー
- 桃鉄経験者・ファン（ゲームルールを知っている）
- 友人・家族と同じPCで対戦したい人

### セカンダリユーザー
- 桃鉄未経験だがボードゲームが好きな人
- CPU対戦で一人遊びしたい人

---

## 3. プラットフォーム・対応環境

| 項目 | 内容 |
|------|------|
| 対象プラットフォーム | Webブラウザ（PC専用） |
| スマートフォン対応 | なし |
| 言語 | 日本語のみ |

---

## 4. 主要機能一覧

### 4-1. ゲーム基本システム
- 日本全国マップ（実在地名、約50〜60都市）での双六ゲーム
- 最大4人対戦（人間プレイヤー + CPU の組み合わせ自由）
- プレイヤーが年数を自由入力してゲーム開始
- ターン制によるサイコロ移動

### 4-2. マップ・移動システム
- 日本全国の路線マップ（新幹線・在来線・フェリー）
- 分岐点でのプレイヤーによる進路選択
- 各種マス目（物件マス・カードマス・ショップマス等、本家と同じ種類）

### 4-3. 物件システム
- 都市ごとに1〜5件の物件を購入可能（本家と同じ構成）
- 物件テーマは地域の特産品・観光・産業
- 都市の全物件購入による独占ボーナス
- カード・イベントによる物件の横取り・売買（本家と同じルール）

### 4-4. カードシステム
- 本家桃鉄の主要カードをすべて実装（移動系・妨害系・援助系 等）
- 手持ち上限8枚
- カードマス・カード売り場での入手

### 4-5. 目的地システム
- ターンごとに目的地が設定される
- 先着プレイヤーへのボーナス（総資産 × 年数ボーナス倍率、本家と同じ計算式）

### 4-6. ボンビーシステム
- ミニボンビー・ボンビー・キングボンビーの3段階
- 最下位プレイヤーへの憑依
- 本家と同じ行動・効果（お金を奪う・物件を売る・キングボンビーは物件破壊 等）

### 4-7. イベントシステム
- 月替わりランダムイベント（本家と同じ）
- 年末決算・臨時収入（本家と同じ）

### 4-8. CPU（AI）システム
- 3段階の難易度設定
  - やさしい：ランダム行動
  - ふつう：基本戦略
  - むずかしい：最適戦略

### 4-9. セーブ・ロードシステム
- ブラウザのローカルストレージへのゲームデータ保存
- 将来的なサーバー移行に備えたSaveManager設計
- 中断・再開機能

### 4-10. 演出・UI
- ポップでカラフルなアニメ調のビジュアル
- コマ移動アニメーション
- イベント・カード使用時のエフェクト
- BGM・効果音

---

## 5. 非機能要件

| 項目 | 要件 |
|------|------|
| 対応ブラウザ | 主要モダンブラウザ（Chrome・Firefox・Safari・Edge） |
| パフォーマンス | アニメーション・マップ描画が60FPSで動作すること |
| 保守性 | ゲームデータ（カード・物件・イベント）をJSONファイルで管理し追加・変更が容易なこと |
| 拡張性 | 将来的なサーバー保存移行ができる設計にすること |
| ゲームデータ管理 | カード・物件・イベント等のデータをコードと分離してデータファイルで管理 |

---

## 6. ユーザーストーリー

### ゲーム開始
- ユーザーとして、プレイヤー人数・CPU難易度・年数を設定してゲームを開始したい
- ユーザーとして、自分のキャラクター（コマ）を選択したい

### ゲームプレイ
- プレイヤーとして、サイコロを振って日本全国のマップを移動したい
- プレイヤーとして、物件マスに止まったら物件を購入したい
- プレイヤーとして、目的地に到着してボーナスを獲得したい
- プレイヤーとして、カードを使って有利な状況を作りたい
- プレイヤーとして、ボンビーを他のプレイヤーに押しつけたい
- プレイヤーとして、年末に保有物件から収益を得たい

### CPU対戦
- ユーザーとして、一人でもCPUと対戦して楽しみたい
- ユーザーとして、難易度を選んで自分のレベルに合わせて遊びたい

### セーブ・ロード
- ユーザーとして、ゲームを途中で中断して後から再開したい

---

## 7. 受け入れ条件

### ゲーム基本動作
- [ ] 最大4人でゲームが開始できる
- [ ] サイコロを振ってマップ上を移動できる
- [ ] 分岐点で進路を選択できる

### 物件システム
- [ ] 物件マスに止まったら購入画面が表示される
- [ ] 購入した物件の収益が年末に反映される
- [ ] 都市の全物件購入時に独占ボーナスが適用される

### カード・ボンビー
- [ ] カードを取得・使用できる
- [ ] 最下位プレイヤーにボンビーが憑依する
- [ ] キングボンビーが物件を破壊する

### CPU
- [ ] 3段階の難易度でCPUが動作する
- [ ] CPUが自動でターンを進行する

### セーブ
- [ ] ゲームデータがローカルストレージに保存される
- [ ] 保存したデータから再開できる

### 演出
- [ ] コマ移動時にアニメーションが再生される
- [ ] BGM・効果音が鳴る

---

## 8. スコープ外（将来対応）

- スマートフォン対応
- オンラインマルチプレイ
- サーバーへのデータ保存
- 多言語対応
- ゲームタイトルの確定（現在未定）
